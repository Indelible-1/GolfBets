(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54338,75076,50136,e=>{"use strict";let t;var r=e.i(71645);e.i(51718);var a=e.i(18357),i=e.i(59141);e.i(36180);var s=e.i(98925);let o={toFirestore:e=>({...e,createdAt:s.Timestamp.fromDate(e.createdAt),updatedAt:s.Timestamp.fromDate(e.updatedAt),lastActiveAt:s.Timestamp.fromDate(e.lastActiveAt)}),fromFirestore:e=>{let t=e.data();return{...t,id:e.id,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),lastActiveAt:t.lastActiveAt.toDate()}}},n={toFirestore:e=>({...e,createdAt:s.Timestamp.fromDate(e.createdAt),updatedAt:s.Timestamp.fromDate(e.updatedAt),startedAt:e.startedAt?s.Timestamp.fromDate(e.startedAt):null,completedAt:e.completedAt?s.Timestamp.fromDate(e.completedAt):null,teeTime:s.Timestamp.fromDate(e.teeTime)}),fromFirestore:e=>{let t=e.data();return{...t,id:e.id,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),startedAt:t.startedAt?.toDate()??null,completedAt:t.completedAt?.toDate()??null,teeTime:t.teeTime.toDate()}}},l={toFirestore:e=>({...e,invitedAt:s.Timestamp.fromDate(e.invitedAt),confirmedAt:e.confirmedAt?s.Timestamp.fromDate(e.confirmedAt):null}),fromFirestore:e=>{let t=e.data();return{...t,id:e.id,invitedAt:t.invitedAt.toDate(),confirmedAt:t.confirmedAt?.toDate()??null}}},c={toFirestore:e=>({...e,createdAt:s.Timestamp.fromDate(e.createdAt),updatedAt:s.Timestamp.fromDate(e.updatedAt),syncedAt:e.syncedAt?s.Timestamp.fromDate(e.syncedAt):null}),fromFirestore:e=>{let t=e.data();return{...t,id:e.id,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),syncedAt:t.syncedAt?.toDate()??null}}},d={toFirestore:e=>({...e,createdAt:s.Timestamp.fromDate(e.createdAt)}),fromFirestore:e=>{let t=e.data();return{...t,id:e.id,createdAt:t.createdAt.toDate()}}};function m(){return t||(t=(0,s.getFirestore)()),t}let u=e=>(0,s.doc)((0,s.collection)(m(),"users"),e).withConverter(o);async function p(e){try{let t=await (0,s.getDoc)(u(e));return t.exists()?t.data():null}catch(e){throw console.error("Error fetching user:",e),e}}async function h(e,t){let r=new Date,a={id:e,displayName:t.displayName,email:t.email,avatarUrl:null,handicapIndex:null,homeClub:null,defaultTeeBox:"blue",notificationsEnabled:!0,createdAt:r,updatedAt:r,lastActiveAt:r};try{return await (0,s.setDoc)(u(e),a),a}catch(e){throw console.error("Error creating user:",e),e}}async function g(e,t){try{await (0,s.updateDoc)(u(e),{...t,updatedAt:new Date})}catch(e){throw console.error("Error updating user:",e),e}}async function x(e){try{await (0,s.updateDoc)(u(e),{lastActiveAt:new Date})}catch(e){throw console.error("Error updating user activity:",e),e}}function f(){let[e,t]=(0,r.useState)(null),[s,o]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=(0,a.onAuthStateChanged)(i.auth,async e=>{try{if(t(e),e){let t=await p(e.uid);if(t)await x(e.uid);else{let r=e.displayName||e.email||"User",a=e.email||"";t=await h(e.uid,{displayName:r,email:a})}o(t),d(null)}else o(null),d(null);l(!1)}catch(e){d(e instanceof Error?e:Error("Unknown auth error")),l(!1)}});return()=>e()},[]),{firebaseUser:e,user:s,loading:n,error:c}}e.s(["betDoc",0,(e,t)=>(0,s.doc)((0,s.collection)(m(),`matches/${e}/bets`),t).withConverter(d),"matchDoc",0,e=>(0,s.doc)((0,s.collection)(m(),"matches"),e).withConverter(n),"matchesCollection",0,()=>(0,s.collection)(m(),"matches").withConverter(n),"participantsCollection",0,e=>(0,s.collection)(m(),`matches/${e}/participants`).withConverter(l),"scoreDoc",0,(e,t)=>(0,s.doc)((0,s.collection)(m(),`matches/${e}/scores`),t).withConverter(c),"scoresCollection",0,e=>(0,s.collection)(m(),`matches/${e}/scores`).withConverter(c),"userDoc",0,u],75076),e.s(["createUser",()=>h,"getUser",()=>p,"updateUser",()=>g,"updateUserActivity",()=>x],50136),e.s(["useAuth",()=>f],54338)},64649,48010,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),i=e.i(54338);e.i(84004);var s=e.i(66085);function o({children:e}){let{user:o,loading:n}=(0,i.useAuth)(),l=(0,a.useRouter)();return((0,r.useEffect)(()=>{n||o||l.push("/login")},[o,n,l]),n)?(0,t.jsx)(s.Screen,{className:"flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin text-4xl mb-4",children:"â›³"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})}):o?(0,t.jsx)(t.Fragment,{children:e}):null}e.s(["ProtectedRoute",()=>o],48010),e.s([],64649)},41160,e=>{"use strict";e.i(51718);var t=e.i(18357),r=e.i(59141);async function a(e){try{await (0,t.sendSignInLinkToEmail)(r.auth,e,{url:"http://localhost:3000/auth/callback",handleCodeInApp:!0}),localStorage.setItem("emailForSignIn",e)}catch(e){throw console.error("Error sending magic link:",e),e}}async function i(){if(!(0,t.isSignInWithEmailLink)(r.auth,window.location.href))return null;let e=localStorage.getItem("emailForSignIn");if(!e)throw Error("No email found for magic link sign-in");try{let a=await (0,t.signInWithEmailLink)(r.auth,e,window.location.href);return localStorage.removeItem("emailForSignIn"),a}catch(e){throw console.error("Error completing magic link sign-in:",e),e}}async function s(){try{await (0,t.signOut)(r.auth)}catch(e){throw console.error("Error signing out:",e),e}}e.s(["completeMagicLink",()=>i,"sendMagicLink",()=>a,"signOutUser",()=>s])},13399,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566);e.i(84004);var i=e.i(66085),s=e.i(3374);e.i(16787);var o=e.i(39964),n=e.i(59544),l=e.i(3812);e.i(64649);var c=e.i(48010),d=e.i(54338),m=e.i(50136),u=e.i(41160);function p(){let e=(0,a.useRouter)(),{user:p,firebaseUser:h}=(0,d.useAuth)(),[g,x]=(0,r.useState)(p?.displayName||""),[f,A]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[b,j]=(0,r.useState)(null),D=async()=>{if(!p||!g.trim())return void j({type:"error",text:"Display name cannot be empty"});A(!0),j(null);try{await (0,m.updateUser)(p.id,{displayName:g}),j({type:"success",text:"Profile updated successfully"})}catch(e){console.error("Error updating profile:",e),j({type:"error",text:e instanceof Error?e.message:"Failed to update profile"})}finally{A(!1)}},N=async()=>{v(!0);try{await (0,u.signOutUser)(),e.push("/login")}catch(e){console.error("Error signing out:",e),j({type:"error",text:e instanceof Error?e.message:"Failed to sign out"}),v(!1)}};return(0,t.jsx)(c.ProtectedRoute,{children:(0,t.jsxs)(i.Screen,{padBottom:!0,children:[(0,t.jsx)(s.Header,{title:"Settings",subtitle:"Your Profile"}),(0,t.jsxs)("div",{className:"p-4 pb-24 space-y-6",children:[b&&(0,t.jsx)(o.Card,{variant:"outlined",className:`p-4 ${"success"===b.type?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:(0,t.jsx)("p",{className:"success"===b.type?"text-green-700 text-sm":"text-red-700 text-sm",children:b.text})}),(0,t.jsxs)(o.Card,{variant:"elevated",className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),p&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,t.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-600 text-sm",children:p.email||h?.email||"No email"})]}),(0,t.jsx)("div",{children:(0,t.jsx)(l.Input,{label:"Display Name",value:g,onChange:e=>x(e.target.value),placeholder:"Enter your name",disabled:f})}),(0,t.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Golf Profile (Coming Soon)"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Handicap Index"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:p.handicapIndex||"Not set"})]}),(0,t.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Home Club"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:p.homeClub||"Not set"})]})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(n.Button,{onClick:D,disabled:f||g===p.displayName,fullWidth:!0,children:f?"Saving...":"Save Changes"})})]})]}),(0,t.jsxs)(o.Card,{variant:"elevated",className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Member Since"}),(0,t.jsx)("p",{className:"text-base font-semibold text-gray-900 mt-1",children:p?.createdAt?new Date(p.createdAt).toLocaleDateString():"Unknown"})]}),(0,t.jsx)(n.Button,{variant:"secondary",onClick:N,disabled:y,fullWidth:!0,className:"text-red-600 border-red-200 hover:bg-red-50",children:y?"Signing Out...":"Sign Out"})]})]}),(0,t.jsx)(o.Card,{variant:"outlined",className:"bg-blue-50 border-blue-200 p-4",children:(0,t.jsxs)("p",{className:"text-blue-900 text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:"ðŸ’¡ Tips:"}),(0,t.jsx)("br",{}),"Update your display name so other players know who you are. Golf profile features coming soon."]})})]})]})})}e.s(["default",()=>p])}]);