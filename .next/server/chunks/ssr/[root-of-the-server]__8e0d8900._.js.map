{"version":3,"sources":["../../../../src/lib/auth/config.ts","../../../../src/app/%28auth%29/login/page.tsx"],"sourcesContent":["import {\n  sendSignInLinkToEmail,\n  isSignInWithEmailLink,\n  signInWithEmailLink,\n  signOut,\n  signInWithPopup,\n  GoogleAuthProvider,\n  UserCredential,\n} from 'firebase/auth'\nimport { auth } from '@/lib/firebase'\n\n// ============ MAGIC LINK AUTH ============\n\n/**\n * Send magic link to user's email for passwordless sign-in\n * @param email User's email address\n */\nexport async function sendMagicLink(email: string): Promise<void> {\n  const actionCodeSettings = {\n    url: `${process.env.NEXT_PUBLIC_APP_URL}/auth/callback`,\n    handleCodeInApp: true,\n  }\n\n  try {\n    await sendSignInLinkToEmail(auth, email, actionCodeSettings)\n    // Store email in localStorage so user can confirm it after clicking link\n    localStorage.setItem('emailForSignIn', email)\n  } catch (error) {\n    console.error('Error sending magic link:', error)\n    throw error\n  }\n}\n\n/**\n * Complete sign-in with magic link from email\n * @returns UserCredential if successful\n */\nexport async function completeMagicLink(): Promise<UserCredential | null> {\n  if (!isSignInWithEmailLink(auth, window.location.href)) {\n    return null\n  }\n\n  const email = localStorage.getItem('emailForSignIn')\n  if (!email) {\n    throw new Error('No email found for magic link sign-in')\n  }\n\n  try {\n    const result = await signInWithEmailLink(auth, email, window.location.href)\n    localStorage.removeItem('emailForSignIn')\n    return result\n  } catch (error) {\n    console.error('Error completing magic link sign-in:', error)\n    throw error\n  }\n}\n\n// ============ GOOGLE OAUTH ============\n\n/**\n * Sign in with Google OAuth\n * @returns UserCredential if successful\n */\nexport async function signInWithGoogle(): Promise<UserCredential> {\n  const provider = new GoogleAuthProvider()\n\n  try {\n    return await signInWithPopup(auth, provider)\n  } catch (error) {\n    console.error('Error signing in with Google:', error)\n    throw error\n  }\n}\n\n// ============ SIGN OUT ============\n\n/**\n * Sign out current user\n */\nexport async function signOutUser(): Promise<void> {\n  try {\n    await signOut(auth)\n  } catch (error) {\n    console.error('Error signing out:', error)\n    throw error\n  }\n}\n\n","'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { sendMagicLink } from '@/lib/auth/config'\nimport { Screen, Header } from '@/components/layout'\nimport { Input, Button, Card } from '@/components/ui'\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const [email, setEmail] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [success, setSuccess] = useState(false)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(null)\n    setLoading(true)\n\n    try {\n      if (!email.trim()) {\n        throw new Error('Please enter an email address')\n      }\n\n      // Basic email validation\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n      if (!emailRegex.test(email)) {\n        throw new Error('Please enter a valid email address')\n      }\n\n      await sendMagicLink(email)\n      setSuccess(true)\n      setEmail('')\n\n      // Auto-redirect after 3 seconds\n      setTimeout(() => {\n        router.push('/auth/callback')\n      }, 3000)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to send magic link')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (success) {\n    return (\n      <Screen>\n        <Header title=\"Check your email\" />\n        <div className=\"p-4 space-y-4\">\n          <Card variant=\"elevated\" className=\"bg-green-50 border border-green-200\">\n            <div className=\"text-center\">\n              <div className=\"text-4xl mb-3\">✅</div>\n              <h2 className=\"text-lg font-semibold text-green-900 mb-2\">Magic link sent!</h2>\n              <p className=\"text-green-700 mb-4\">Check your email and click the link to sign in.</p>\n              <p className=\"text-sm text-green-600\">Redirecting to sign in page...</p>\n            </div>\n          </Card>\n        </div>\n      </Screen>\n    )\n  }\n\n  return (\n    <Screen>\n      <Header title=\"Sign In\" />\n\n      <div className=\"p-4 max-w-md mx-auto pt-6\">\n        <Card variant=\"elevated\" className=\"space-y-6\">\n          {/* Title */}\n          <div className=\"text-center\">\n            <div className=\"text-4xl mb-3\">⛳</div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">GolfSettled</h1>\n            <p className=\"text-gray-500 mt-1\">Track golf bets with friends</p>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {error && (\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            )}\n\n            <div>\n              <Input\n                type=\"email\"\n                label=\"Email Address\"\n                placeholder=\"you@example.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                disabled={loading}\n                autoFocus\n                required\n              />\n              <p className=\"text-xs text-gray-500 mt-2\">\n                We&apos;ll send you a magic link to sign in. No password needed.\n              </p>\n            </div>\n\n            <Button type=\"submit\" fullWidth loading={loading} size=\"md\">\n              Send Magic Link\n            </Button>\n          </form>\n\n          {/* Footer */}\n          <div className=\"text-center text-xs text-gray-500\">\n            <p>No account? Sign in to create one.</p>\n          </div>\n        </Card>\n      </div>\n    </Screen>\n  )\n}\n"],"names":[],"mappings":"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"}