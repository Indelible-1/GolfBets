module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},32636,78367,56974,a=>{"use strict";let b;var c=a.i(72131);a.i(30485);var d=a.i(31052),e=a.i(20237);a.i(69387);var f=a.i(60574);let g={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt),updatedAt:f.Timestamp.fromDate(a.updatedAt),lastActiveAt:f.Timestamp.fromDate(a.lastActiveAt)}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate(),lastActiveAt:b.lastActiveAt.toDate()}}},h={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt),updatedAt:f.Timestamp.fromDate(a.updatedAt),startedAt:a.startedAt?f.Timestamp.fromDate(a.startedAt):null,completedAt:a.completedAt?f.Timestamp.fromDate(a.completedAt):null,teeTime:f.Timestamp.fromDate(a.teeTime)}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate(),startedAt:b.startedAt?.toDate()??null,completedAt:b.completedAt?.toDate()??null,teeTime:b.teeTime.toDate()}}},i={toFirestore:a=>({...a,invitedAt:f.Timestamp.fromDate(a.invitedAt),confirmedAt:a.confirmedAt?f.Timestamp.fromDate(a.confirmedAt):null}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,invitedAt:b.invitedAt.toDate(),confirmedAt:b.confirmedAt?.toDate()??null}}},j={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt),updatedAt:f.Timestamp.fromDate(a.updatedAt),syncedAt:a.syncedAt?f.Timestamp.fromDate(a.syncedAt):null}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate(),syncedAt:b.syncedAt?.toDate()??null}}},k={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt)}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate()}}};function l(){return b||(b=(0,f.getFirestore)()),b}let m=a=>(0,f.doc)((0,f.collection)(l(),"users"),a).withConverter(g);async function n(a){try{let b=await (0,f.getDoc)(m(a));return b.exists()?b.data():null}catch(a){throw console.error("Error fetching user:",a),a}}async function o(a,b){let c=new Date,d={id:a,displayName:b.displayName,email:b.email,avatarUrl:null,handicapIndex:null,homeClub:null,defaultTeeBox:"blue",notificationsEnabled:!0,createdAt:c,updatedAt:c,lastActiveAt:c};try{return await (0,f.setDoc)(m(a),d),d}catch(a){throw console.error("Error creating user:",a),a}}async function p(a,b){try{await (0,f.updateDoc)(m(a),{...b,updatedAt:new Date})}catch(a){throw console.error("Error updating user:",a),a}}async function q(a){try{await (0,f.updateDoc)(m(a),{lastActiveAt:new Date})}catch(a){throw console.error("Error updating user activity:",a),a}}function r(){let[a,b]=(0,c.useState)(null),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let a=(0,d.onAuthStateChanged)(e.auth,async a=>{try{if(b(a),a){let b=await n(a.uid);if(b)await q(a.uid);else{let c=a.displayName||a.email||"User",d=a.email||"";b=await o(a.uid,{displayName:c,email:d})}g(b),k(null)}else g(null),k(null);i(!1)}catch(a){k(a instanceof Error?a:Error("Unknown auth error")),i(!1)}});return()=>a()},[]),{firebaseUser:a,user:f,loading:h,error:j}}a.s(["betDoc",0,(a,b)=>(0,f.doc)((0,f.collection)(l(),`matches/${a}/bets`),b).withConverter(k),"matchDoc",0,a=>(0,f.doc)((0,f.collection)(l(),"matches"),a).withConverter(h),"matchesCollection",0,()=>(0,f.collection)(l(),"matches").withConverter(h),"participantsCollection",0,a=>(0,f.collection)(l(),`matches/${a}/participants`).withConverter(i),"scoreDoc",0,(a,b)=>(0,f.doc)((0,f.collection)(l(),`matches/${a}/scores`),b).withConverter(j),"scoresCollection",0,a=>(0,f.collection)(l(),`matches/${a}/scores`).withConverter(j),"userDoc",0,m],78367),a.s(["createUser",()=>o,"getUser",()=>n,"updateUser",()=>p,"updateUserActivity",()=>q],56974),a.s(["useAuth",()=>r],32636)},1380,90925,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(32636);a.i(45600);var f=a.i(30400);function g({children:a}){let{user:g,loading:h}=(0,e.useAuth)(),i=(0,d.useRouter)();return((0,c.useEffect)(()=>{h||g||i.push("/login")},[g,h,i]),h)?(0,b.jsx)(f.Screen,{className:"flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin text-4xl mb-4",children:"â›³"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})}):g?(0,b.jsx)(b.Fragment,{children:a}):null}a.s(["ProtectedRoute",()=>g],90925),a.s([],1380)},98756,a=>{"use strict";a.i(30485);var b=a.i(31052),c=a.i(20237);async function d(a){try{await (0,b.sendSignInLinkToEmail)(c.auth,a,{url:"http://localhost:3000/auth/callback",handleCodeInApp:!0}),localStorage.setItem("emailForSignIn",a)}catch(a){throw console.error("Error sending magic link:",a),a}}async function e(){if(!(0,b.isSignInWithEmailLink)(c.auth,window.location.href))return null;let a=localStorage.getItem("emailForSignIn");if(!a)throw Error("No email found for magic link sign-in");try{let d=await (0,b.signInWithEmailLink)(c.auth,a,window.location.href);return localStorage.removeItem("emailForSignIn"),d}catch(a){throw console.error("Error completing magic link sign-in:",a),a}}async function f(){try{await (0,b.signOut)(c.auth)}catch(a){throw console.error("Error signing out:",a),a}}a.s(["completeMagicLink",()=>e,"sendMagicLink",()=>d,"signOutUser",()=>f])},20788,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(45600);var e=a.i(30400),f=a.i(43218);a.i(11909);var g=a.i(62067),h=a.i(96438),i=a.i(94988);a.i(1380);var j=a.i(90925),k=a.i(32636),l=a.i(56974),m=a.i(98756);function n(){let a=(0,d.useRouter)(),{user:n,firebaseUser:o}=(0,k.useAuth)(),[p,q]=(0,c.useState)(n?.displayName||""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),x=async()=>{if(!n||!p.trim())return void w({type:"error",text:"Display name cannot be empty"});s(!0),w(null);try{await (0,l.updateUser)(n.id,{displayName:p}),w({type:"success",text:"Profile updated successfully"})}catch(a){console.error("Error updating profile:",a),w({type:"error",text:a instanceof Error?a.message:"Failed to update profile"})}finally{s(!1)}},y=async()=>{u(!0);try{await (0,m.signOutUser)(),a.push("/login")}catch(a){console.error("Error signing out:",a),w({type:"error",text:a instanceof Error?a.message:"Failed to sign out"}),u(!1)}};return(0,b.jsx)(j.ProtectedRoute,{children:(0,b.jsxs)(e.Screen,{padBottom:!0,children:[(0,b.jsx)(f.Header,{title:"Settings",subtitle:"Your Profile"}),(0,b.jsxs)("div",{className:"p-4 pb-24 space-y-6",children:[v&&(0,b.jsx)(g.Card,{variant:"outlined",className:`p-4 ${"success"===v.type?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:(0,b.jsx)("p",{className:"success"===v.type?"text-green-700 text-sm":"text-red-700 text-sm",children:v.text})}),(0,b.jsxs)(g.Card,{variant:"elevated",className:"p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),n&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,b.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-600 text-sm",children:n.email||o?.email||"No email"})]}),(0,b.jsx)("div",{children:(0,b.jsx)(i.Input,{label:"Display Name",value:p,onChange:a=>q(a.target.value),placeholder:"Enter your name",disabled:r})}),(0,b.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Golf Profile (Coming Soon)"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Handicap Index"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.handicapIndex||"Not set"})]}),(0,b.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Home Club"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.homeClub||"Not set"})]})]})]}),(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)(h.Button,{onClick:x,disabled:r||p===n.displayName,fullWidth:!0,children:r?"Saving...":"Save Changes"})})]})]}),(0,b.jsxs)(g.Card,{variant:"elevated",className:"p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Member Since"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-900 mt-1",children:n?.createdAt?new Date(n.createdAt).toLocaleDateString():"Unknown"})]}),(0,b.jsx)(h.Button,{variant:"secondary",onClick:y,disabled:t,fullWidth:!0,className:"text-red-600 border-red-200 hover:bg-red-50",children:t?"Signing Out...":"Sign Out"})]})]}),(0,b.jsx)(g.Card,{variant:"outlined",className:"bg-blue-50 border-blue-200 p-4",children:(0,b.jsxs)("p",{className:"text-blue-900 text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:"ðŸ’¡ Tips:"}),(0,b.jsx)("br",{}),"Update your display name so other players know who you are. Golf profile features coming soon."]})})]})]})})}a.s(["default",()=>n])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d297206b._.js.map