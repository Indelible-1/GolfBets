module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},32636,78367,56974,a=>{"use strict";let b;var c=a.i(72131);a.i(30485);var d=a.i(31052),e=a.i(20237);a.i(69387);var f=a.i(60574);let g={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt),updatedAt:f.Timestamp.fromDate(a.updatedAt),lastActiveAt:f.Timestamp.fromDate(a.lastActiveAt)}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate(),lastActiveAt:b.lastActiveAt.toDate()}}},h={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt),updatedAt:f.Timestamp.fromDate(a.updatedAt),startedAt:a.startedAt?f.Timestamp.fromDate(a.startedAt):null,completedAt:a.completedAt?f.Timestamp.fromDate(a.completedAt):null,teeTime:f.Timestamp.fromDate(a.teeTime)}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate(),startedAt:b.startedAt?.toDate()??null,completedAt:b.completedAt?.toDate()??null,teeTime:b.teeTime.toDate()}}},i={toFirestore:a=>({...a,invitedAt:f.Timestamp.fromDate(a.invitedAt),confirmedAt:a.confirmedAt?f.Timestamp.fromDate(a.confirmedAt):null}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,invitedAt:b.invitedAt.toDate(),confirmedAt:b.confirmedAt?.toDate()??null}}},j={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt),updatedAt:f.Timestamp.fromDate(a.updatedAt),syncedAt:a.syncedAt?f.Timestamp.fromDate(a.syncedAt):null}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate(),syncedAt:b.syncedAt?.toDate()??null}}},k={toFirestore:a=>({...a,createdAt:f.Timestamp.fromDate(a.createdAt)}),fromFirestore:a=>{let b=a.data();return{...b,id:a.id,createdAt:b.createdAt.toDate()}}};function l(){return b||(b=(0,f.getFirestore)()),b}let m=a=>(0,f.doc)((0,f.collection)(l(),"users"),a).withConverter(g);async function n(a){try{let b=await (0,f.getDoc)(m(a));return b.exists()?b.data():null}catch(a){throw console.error("Error fetching user:",a),a}}async function o(a,b){let c=new Date,d={id:a,displayName:b.displayName,email:b.email,avatarUrl:null,handicapIndex:null,homeClub:null,defaultTeeBox:"blue",notificationsEnabled:!0,createdAt:c,updatedAt:c,lastActiveAt:c};try{return await (0,f.setDoc)(m(a),d),d}catch(a){throw console.error("Error creating user:",a),a}}async function p(a,b){try{await (0,f.updateDoc)(m(a),{...b,updatedAt:new Date})}catch(a){throw console.error("Error updating user:",a),a}}async function q(a){try{await (0,f.updateDoc)(m(a),{lastActiveAt:new Date})}catch(a){throw console.error("Error updating user activity:",a),a}}function r(){let[a,b]=(0,c.useState)(null),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let a=(0,d.onAuthStateChanged)(e.auth,async a=>{try{if(b(a),a){let b=await n(a.uid);if(b)await q(a.uid);else{let c=a.displayName||a.email||"User",d=a.email||"";b=await o(a.uid,{displayName:c,email:d})}g(b),k(null)}else g(null),k(null);i(!1)}catch(a){k(a instanceof Error?a:Error("Unknown auth error")),i(!1)}});return()=>a()},[]),{firebaseUser:a,user:f,loading:h,error:j}}a.s(["betDoc",0,(a,b)=>(0,f.doc)((0,f.collection)(l(),`matches/${a}/bets`),b).withConverter(k),"matchDoc",0,a=>(0,f.doc)((0,f.collection)(l(),"matches"),a).withConverter(h),"matchesCollection",0,()=>(0,f.collection)(l(),"matches").withConverter(h),"participantsCollection",0,a=>(0,f.collection)(l(),`matches/${a}/participants`).withConverter(i),"scoreDoc",0,(a,b)=>(0,f.doc)((0,f.collection)(l(),`matches/${a}/scores`),b).withConverter(j),"scoresCollection",0,a=>(0,f.collection)(l(),`matches/${a}/scores`).withConverter(j),"userDoc",0,m],78367),a.s(["createUser",()=>o,"getUser",()=>n,"updateUser",()=>p,"updateUserActivity",()=>q],56974),a.s(["useAuth",()=>r],32636)},15706,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(78367);async function d(a){try{let d=await (0,b.getDoc)((0,c.matchDoc)(a));return d.exists()?d.data():null}catch(a){throw console.error("Error fetching match:",a),a}}async function e(a,d){try{let e=(0,b.query)((0,c.matchesCollection)(),(0,b.where)("participantIds","array-contains",a)),f=(await (0,b.getDocs)(e)).docs.map(a=>a.data());return d&&(f=f.filter(a=>a.status===d)),f.sort((a,b)=>b.teeTime.getTime()-a.teeTime.getTime())}catch(a){throw console.error("Error fetching user matches:",a),a}}async function f(a,d){let e=new Date,f=`match_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g={id:f,courseName:d.courseName,courseId:d.courseId||null,teeTime:d.teeTime,holes:d.holes||18,status:"pending",currentHole:null,createdBy:a,scorerId:a,participantIds:[a],createdAt:e,updatedAt:e,startedAt:null,completedAt:null,version:1};try{return await (0,b.setDoc)((0,c.matchDoc)(f),g),g}catch(a){throw console.error("Error creating match:",a),a}}async function g(a,d){try{let e={status:d,updatedAt:new Date};"active"===d?e.startedAt=new Date:"completed"===d&&(e.completedAt=new Date),await (0,b.updateDoc)((0,c.matchDoc)(a),e)}catch(a){throw console.error("Error updating match status:",a),a}}a.s(["createMatch",()=>f,"getMatch",()=>d,"getUserMatches",()=>e,"updateMatchStatus",()=>g])},40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(32636);a.i(45600);var f=a.i(30400),g=a.i(43218);a.i(11909);var h=a.i(62067),i=a.i(96438);a.i(11071);var j=a.i(35928),k=a.i(15706);function l(){let{user:a,loading:l}=(0,e.useAuth)(),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null);return((0,c.useEffect)(()=>{a&&(async()=>{try{p(!0);let b=await (0,k.getUserMatches)(a.id);n(b)}catch(a){console.error("Failed to fetch matches:",a),r("Failed to load matches")}finally{p(!1)}})()},[a]),l)?(0,b.jsx)(f.Screen,{className:"flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-spin text-4xl",children:"â›³"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading GolfSettled..."})]})}):a?(0,b.jsxs)(f.Screen,{children:[(0,b.jsx)(g.Header,{title:"GolfSettled",subtitle:`Hey, ${a.displayName||"Golfer"}!`}),(0,b.jsxs)("div",{className:"p-4 space-y-6",children:[(0,b.jsx)(d.default,{href:"/match/new",children:(0,b.jsx)(h.Card,{variant:"elevated",className:"bg-gradient-to-r from-fairway-600 to-fairway-700 text-white cursor-pointer hover:shadow-xl transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"Start a Match"}),(0,b.jsx)("p",{className:"text-sm opacity-90",children:"Set up bets with your group"})]}),(0,b.jsx)("div",{className:"text-3xl",children:"â›³"})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Your Matches"}),o?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin inline-block text-2xl mb-2",children:"â›³"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading matches..."})]}):q?(0,b.jsx)(h.Card,{variant:"outlined",className:"bg-red-50 border-red-200",children:(0,b.jsx)("p",{className:"text-red-700 text-sm",children:q})}):0===m.length?(0,b.jsxs)(h.Card,{variant:"outlined",className:"text-center py-8",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"ðŸŒï¸"}),(0,b.jsx)("p",{className:"text-gray-500",children:"No matches yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Create one to get started!"})]}):(0,b.jsx)("div",{className:"space-y-3",children:m.map(a=>(0,b.jsx)(j.MatchCard,{match:a},a.id))})]})]})]}):(0,b.jsx)(f.Screen,{className:"flex flex-col items-center justify-center",children:(0,b.jsxs)("div",{className:"p-4 max-w-md w-full text-center space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-5xl mb-3",children:"â›³"}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-fairway-700",children:"GolfSettled"}),(0,b.jsx)("p",{className:"text-gray-500 mt-2",children:"Track golf bets with friends"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3 py-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸ†"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Nassau"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸ’°"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Skins"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸ“Š"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Ledger"})]})]}),(0,b.jsx)(d.default,{href:"/login",children:(0,b.jsx)(i.Button,{size:"lg",fullWidth:!0,children:"Get Started"})}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 space-y-1 pt-4",children:[(0,b.jsx)("p",{children:"No real money is handled by this app"}),(0,b.jsx)("p",{children:"Settle up offline via Venmo, Zelle, or cash"})]})]})})}a.s(["default",()=>l,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a520ad62._.js.map